<!doctype html>
<html>
<head>
<meta charset="utf-8" />
<title>SpotGuess Duel — Map + Multiplayer + Street View</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<style>
  html,body { height:100%; margin:0; }
  body { 
    font-family: system-ui, Arial; 
    margin:0; 
    padding:0; 
    display:flex; 
    height:100vh; 
  }

  #left { 
    width: 380px; 
    padding:12px; 
    box-sizing:border-box; 
    background:#f7f7f8; 
    overflow:auto; 
    border-right:1px solid #ddd; 
  }

  #map { 
    flex:1; 
    min-height:0; 
    margin-bottom:12px; 
    height:50vh;     /* ← more mobile-friendly */
  }

  #guesserStreetView { 
    width:100%; 
    height:300px; 
    border-radius:8px; 
    background:#ddd; 
    display:flex; 
    align-items:center; 
    justify-content:center; 
    font-weight:bold; 
    color:#555; 
    margin-bottom:8px; 
  }

  #guessMap { 
    width:100%; 
    height:300px; 
    margin-bottom:8px; 
  }

  button { padding:8px 12px; margin:6px 0; width:100%; box-sizing:border-box; }

  .panel { 
    background:white; 
    padding:10px; 
    border-radius:8px; 
    margin-bottom:12px; 
    box-shadow:0 2px 6px rgba(0,0,0,0.05); 
  }

  input[type="text"], input[type="search"] {
    width:100%; padding:8px; box-sizing:border-box; margin-bottom:8px; 
  }

  .hint { font-size:0.9rem; color:#555; margin-top:6px; }
  .status { font-weight:600; margin-top:6px; }
  ul { padding-left:18px; margin:6px 0; }

  /* ----- MOBILE FIX ----- */
  @media (max-width:900px){
    body { 
      flex-direction:column; 
      height:auto;      /* ← critical for scrolling */
      overflow-y:auto;  /* ← ensures page scrolls */
    }
    #left { 
      width:100%; 
      border-right:none; 
      border-bottom:1px solid #ddd; 
      max-height:none; 
      overflow:visible; /* ← prevents clipping */
    }
    #map { 
      height:45vh;      /* ← ensures user can scroll down */
      order:2; 
    }
  }
</style>
</head>

<body>
  <div id="left">
    <h2>SpotGuess Duel</h2>

    <div class="panel" id="lobbyControls">
      <button id="createBtn">Create Room</button>
      <input id="roomInput" placeholder="Enter Room Code (e.g. ABC123)" />
      <button id="joinBtn">Join Room</button>
      <div class="hint">Open the same room in another browser to play (2 players).</div>
    </div>

    <div class="panel" id="roomPanel" style="display:none;">
      <div>Room: <span id="roomIdSpan"></span></div>
      <div>Players:
        <ul id="playersList"></ul>
      </div>
      <div>Scores: <pre id="scoresPre" style="white-space:pre-wrap"></pre></div>
      <div class="status" id="statusText">Waiting for players...</div>
    </div>

    <div class="panel" id="pickerPanel" style="display:none;">
      <h3>Picker — Street View on Map</h3>
      <p>Move Street View on the big map and click <b>Spot Chosen</b>.</p>
      <input id="hintInput" placeholder="Optional hint" />
      <button id="submitPickBtn" disabled>Spot Chosen</button>
    </div>

    <div class="panel" id="guesserPanel" style="display:none;">
      <h3>Guesser — Make your guess</h3>
      <div id="guesserStreetView">Waiting for picker to pick spot...</div>
      <div id="guessMap"></div>
      <div id="guessResult" style="margin-top:6px; font-weight:600;"></div>
      <button id="submitGuessBtn" disabled>Submit Guess</button>
    </div>

    <div class="panel" id="resultPanel" style="display:none;">
      <h3>Round Result</h3>
      <div id="resultText"></div>
    </div>
  </div>

  <div id="map"></div>

  <script async
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCQHZHmpF-9_7jEixW8z_h_-zbImwnI3S0&callback=initMaps"></script>
  <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>

  <script>
    /* your entire JS stays the same — omitted here for space but unchanged */
  </script>

</body>
</html>
